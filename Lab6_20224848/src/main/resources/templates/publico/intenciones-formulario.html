<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
<head>
  <meta charset="UTF-8">
  <title>Registrar Intención</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div th:replace="~{fragments/header :: header}"></div>

<div class="container mt-4">
  <h2>Registrar Intención/Petición</h2>

  <!-- Mensajes -->
  <div th:if="${mensaje}" class="alert alert-success" th:text="${mensaje}"></div>
  <div th:if="${error}" class="alert alert-danger" th:text="${error}"></div>

  <div class="card">
    <div class="card-body">
      <form th:action="@{/intenciones/registrar}" th:object="${intencion}" method="post">
        <div class="mb-3">
          <label for="descripcion" class="form-label">Tu Intención/Petición</label>
          <textarea class="form-control" id="descripcion" th:field="*{descripcion}"
                    rows="4" placeholder="Escribe tu petición (mínimo 15 caracteres)..."
                    required></textarea>
          <div class="form-text">Mínimo 15 caracteres. No se permiten palabras ofensivas.</div>
        </div>
        <button type="submit" class="btn btn-primary">Registrar Intención</button>
      </form>
    </div>
  </div>

  <!-- Mis intenciones anteriores -->
  <div class="mt-4">
    <h4>Mis Intenciones Anteriores</h4>
    <div th:if="${intenciones.empty}" class="text-muted">
      No has registrado intenciones anteriores.
    </div>
    <div th:each="intencion : ${intenciones}" class="card mb-2">
      <div class="card-body">
        <p th:text="${intencion.descripcion}"></p>
        <small class="text-muted" th:text="${#temporals.format(intencion.fecha, 'dd/MM/yyyy HH:mm')}"></small>
      </div>
    </div>
  </div>
</div>
</body>
</html>